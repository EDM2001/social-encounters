<section class="browser">
  <div class="browser__scroll">
    <section class="browser__section browser__section--category">
      <header class="browser__section-header">
        <h3>{{localize "SOCIALENCOUNTERS.NPCSectionTitle"}}</h3>
        <div class="browser__field-buttons">
          <button type="button" class="browser__btn" data-action="select-all" data-target="npc">{{localize "SOCIALENCOUNTERS.SelectAll"}}</button>
          <button type="button" class="browser__btn browser__btn--muted" data-action="clear-selection" data-target="npc">{{localize "SOCIALENCOUNTERS.ClearSelection"}}</button>
        </div>
      </header>
      <div class="browser__field">
        <input type="text" value="{{folders.npc}}" placeholder="{{localize "SOCIALENCOUNTERS.FolderPlaceholder"}}" readonly>
        <div class="browser__field-buttons">
          <button type="button" class="browser__btn browser__btn--muted" data-action="refresh-folder" data-target="npc" {{#unless folders.npc}}disabled{{/unless}}>{{localize "SOCIALENCOUNTERS.RefreshFolder"}}</button>
        </div>
      </div>
      {{#if hasNpcImages}}
        <div class="image-list image-list--category">
          {{#each npcImages as |img|}}
            <label class="image-card {{#if img.selected}}selected{{/if}}" data-image-path="{{img.path}}">
              <input type="checkbox" data-action="toggle-image" value="{{img.path}}" {{#if img.selected}}checked{{/if}}>
              <img class="image-card__preview" src="{{img.preview}}" alt="{{img.name}}">
              <span class="image-card__name">{{img.name}}</span>
            </label>
          {{/each}}
        </div>
      {{else}}
        <p class="image-list__empty">{{localize "SOCIALENCOUNTERS.NoNpcImages"}}</p>
      {{/if}}
    </section>

    <section class="browser__section browser__section--background">
      <header class="browser__section-header">
        <h3>{{localize "SOCIALENCOUNTERS.BackgroundSectionTitle"}}</h3>
      </header>
      <div class="browser__field">
        <input type="text" value="{{background}}" placeholder="-" readonly>
        <div class="browser__field-buttons">
          <button type="button" class="browser__btn browser__btn--muted" data-action="refresh-folder" data-target="background" {{#unless folders.background}}disabled{{/unless}}>{{localize "SOCIALENCOUNTERS.RefreshFolder"}}</button>
          <button type="button" class="browser__btn browser__btn--muted" data-action="clear-background" {{#unless background}}disabled{{/unless}}>{{localize "SOCIALENCOUNTERS.ClearBackground"}}</button>
        </div>
      </div>
      {{#if hasBackgrounds}}
        <div class="background-list">
          {{#each backgroundImages as |bg|}}
            <button type="button" class="background-card {{#if bg.selected}}is-selected{{/if}}" data-action="select-background" data-path="{{bg.path}}">
              <img src="{{bg.preview}}" alt="{{bg.name}}">
              <span class="background-card__name">{{bg.name}}</span>
            </button>
          {{/each}}
        </div>
      {{else}}
        <p class="image-list__empty">{{localize "SOCIALENCOUNTERS.NoBackgrounds"}}</p>
      {{/if}}
    </section>
  </div>

  <section class="browser__toolbar">
    <span class="browser__selection">
      {{localize "SOCIALENCOUNTERS.SelectImages"}}:
      <strong><span class="selection-count">{{selectedCount}}</span></strong>
    </span>
    <div class="browser__field-buttons">
      <button type="button" class="browser__btn" data-action="select-all">{{localize "SOCIALENCOUNTERS.SelectAll"}}</button>
      <button type="button" class="browser__btn browser__btn--muted" data-action="clear-selection">{{localize "SOCIALENCOUNTERS.ClearSelection"}}</button>
    </div>
  </section>

  <footer class="browser__footer">
    <button type="button" class="browser__btn browser__btn--primary" data-action="launch-viewer">{{localize "SOCIALENCOUNTERS.LaunchViewer"}}</button>
  </footer>
</section>
